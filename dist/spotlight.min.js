/*!
 * Spotlight JS v1.0.2
 * Copyright (c) 2025 Anastasia Shebalkina
 * Licensed under the MIT License (see LICENSE)
 *
 * Includes Tabler Icons (https://tabler.io/icons), MIT License
 * Copyright (c) 2020-2025 Tabler Icons Authors (see LICENSE.tabler-icons)
 */
!function(){"use strict";(()=>{const t=1.2,i=.5,s="spotlight-natural-scrolling",e=(t,i={},s=[])=>{const e=document.createElement(t);return Object.entries(i).forEach(([t,i])=>{"style"===t?Object.assign(e.style,i):t.startsWith("on")&&"function"==typeof i?e.addEventListener(t.slice(2),i):"dataset"===t?Object.entries(i).forEach(([t,i])=>e.dataset[t]=i):e.setAttribute(t,i)}),s.forEach(t=>"string"==typeof t?e.appendChild(document.createTextNode(t)):e.appendChild(t)),e};class h{constructor(){this.collections=[],this.overlay=null,this.state={open:0,collectionIndex:0,itemIndex:0,scale:1,baseScale:1,translateX:0,translateY:0,fullscreen:0},this.i=null,this.h=0,this.renderState={scale:1,translateX:0,translateY:0},this.o=null,this.l=1500,this.u=0,this.p=null,this.m=null,this.v=0,this.k=0,this.M=0,this._=0,this.C=0,this.H=0,this.T=0,this.touchStart=null,this.S=null,this.B={x:0,y:0},this.q=0,this.pointers=new Map,this.A=[],this.debug=!(!window||!window.__spotlight_debug__),this.j=0,this.D=null,this.F=document.body?.classList.contains("using-trackpad")||0;try{const t=window.localStorage.getItem(s);this.invertedScroll="true"===t,this.needsCalibration=null===t}catch(t){this.I("localStorage.getItem",t),this.invertedScroll=0,this.needsCalibration=1}this.calibrationActive=0,this.calibrationSource=null,this.W=null,this.$()}I(t,i){try{this.A.push({op:t,err:i,time:Date.now()})}catch{}this.debug&&"undefined"!=typeof globalThis&&globalThis.console&&globalThis.console.warn&&globalThis.console.warn(`[Spotlight] ${t}:`,i)}N(){return Array.from(this.A||[])}O(){this.A=[]}$(){this.X(),this.R(),this.Y(),this.G(),this.liveRegion=e("div",{"aria-live":"polite",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0,0,0,0)",whiteSpace:"nowrap",border:"0"}}),this.nodes.shell.appendChild(this.liveRegion),this.P()}X(){window.addEventListener("touchstart",()=>{this.j=window.performance.now(),this.K("touch")},{passive:1})}L(t){if(!t)return this.D||"mouse";if(window.performance.now()-(this.j||0)<400)return this.D||"mouse";if("trackpad"===this.D)return"trackpad";const i=this.V(t),s=i?"trackpad":"mouse";return i&&(this.F=1),s!==this.D&&this.K(i?"trackpad":"mouse"),this.D=s,s}K(t){const i=document.body;i&&(i.classList.remove("using-touch","using-mouse","using-trackpad"),"touch"===t?i.classList.add("using-touch"):"trackpad"===t?(i.classList.add("using-trackpad"),this.F=1):i.classList.add("using-mouse"))}V(t){return t?"number"==typeof t.deltaMode&&0!==t.deltaMode||0===Math.abs(t.deltaY)?0:Number.isInteger(t.deltaY)?1:0:0}Z(){if(!this.needsCalibration||this.calibrationActive)return;const t=()=>{this.U("trackpad")};if(this.F||document.body.classList.contains("using-trackpad"))return void t();const i=s=>{"trackpad"===this.L(s)&&(window.removeEventListener("wheel",i),this.W=null,t())};window.addEventListener("wheel",i,{passive:1}),this.W=i}U(t="trackpad"){if("trackpad"!==t||this.calibrationActive)return;this.W&&(window.removeEventListener("wheel",this.W),this.W=null),this.calibrationSource=t,this.calibrationActive=1,this.calibrationAccum=0,this.calibrationStep=0,this.calibrationStartTime=Date.now();const i=e("div",{class:"i",role:"dialog","aria-modal":"true","aria-labelledby":"b","aria-describedby":"c",tabindex:"-1"}),s=e("div",{class:"a"}),h=e("h3",{id:"b"},["Trackpad Setup"]),n=e("p",{id:"c"},["Swipe two fingers down to set scroll direction"]),o=e("div",{class:"trackpad-container"});o.innerHTML="<div class='trackpad'><div class='finger swipe-down' style='margin-left:-22px'></div><div class='finger swipe-down' style='margin-left:22px'></div></div>";const a=e("div",{class:"g"}),r=e("div",{class:"e","aria-hidden":"true"});a.appendChild(r),s.appendChild(h),s.appendChild(n),s.appendChild(o),s.appendChild(a),i.appendChild(s),this.nodes.shell.appendChild(i),this.nodes.calibration=i,this.nodes.calibrationProgress=r,this.nodes.calibrationText=n,this.J=document.activeElement;const l=e("button",{id:"d","aria-label":"Skip calibration",type:"button"},["Skip"]);l.addEventListener("click",()=>this.tt()),s.appendChild(l),requestAnimationFrame(()=>{i.classList.add("visible"),i.focus(),this.it=t=>this.st(t),i.addEventListener("keydown",this.it),this.et=Array.from(i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(t=>!t.hasAttribute("disabled")),this.et&&this.et.length&&this.et[0].focus()})}ht(t){if("trackpad"!==this.calibrationSource)return;if(!this.V(t))return;if(this.nt())return t.preventDefault(),void t.stopPropagation();if(t.preventDefault(),t.stopPropagation(),Math.abs(t.deltaX)>Math.abs(t.deltaY))return;this.calibrationAccum=(this.calibrationAccum||0)+t.deltaY;const i=Math.min(Math.abs(this.calibrationAccum)/80,1);this.ot(i)}nt(){return this.calibrationStartTime&&Date.now()-this.calibrationStartTime<400}ot(t){if(this.nodes.calibrationProgress&&(this.nodes.calibrationProgress.style.width=100*t+"%"),t<1)return;if(0===this.calibrationStep)return this.calibrationStep=1,this.calibrationAccum=0,this.calibrationStartTime=Date.now(),this.nodes.calibrationProgress&&(this.nodes.calibrationProgress.style.width="0%"),this.nodes.calibrationText&&(this.nodes.calibrationText.textContent="One more time..."),void(this.liveRegion&&(this.liveRegion.textContent="Trackpad calibration: step 1 complete. One more time.",setTimeout(()=>{this.liveRegion.textContent=""},1e3)));const i=this.calibrationAccum<0;this.invertedScroll=i;try{window.localStorage.setItem(s,i+"")}catch(e){this.I("localStorage.setItem",e)}this.needsCalibration=0,this.calibrationCooldown=Date.now()+800,this.liveRegion&&(this.liveRegion.textContent="Trackpad calibration complete.",setTimeout(()=>{this.liveRegion.textContent=""},1200)),this.nodes.calibration.classList.remove("visible"),setTimeout(()=>{this.rt(),this.lt(),this.calibrationActive=0,this.calibrationSource=null},300)}rt(){if(this.it){try{(this.nodes?.calibration&&"function"==typeof this.nodes.calibration.removeEventListener?this.nodes.calibration:document).removeEventListener("keydown",this.it)}catch{}this.it=null}this.et=null}lt(){this.nodes.calibration&&(this.nodes.calibration.remove(),this.nodes.calibration=null,this.nodes.calibrationProgress=null,this.nodes.calibrationText=null)}st(t){if(!this.calibrationActive)return;if("Escape"===t.key||"Esc"===t.key)return t.preventDefault(),t.stopPropagation(),void this.tt();if("Tab"!==t.key)return;const i=this.et||[];if(!i.length)return;const s=i.indexOf(document.activeElement);let e=0;e=t.shiftKey?s>0?s-1:i.length-1:(s+1)%i.length,t.preventDefault(),t.stopPropagation(),i[e].focus()}ct(){this.calibrationActive&&this.nodes.calibration&&(this.nodes.calibration.classList.remove("visible"),this.rt(),this.calibrationActive=0,this.calibrationSource=null,this.W&&(window.removeEventListener("wheel",this.W),this.W=null),setTimeout(()=>{this.lt(),this.J&&"function"==typeof this.J.focus&&this.J.focus()},300))}tt(){this.needsCalibration=0,this.calibrationAccum=0,this.calibrationStep=0,this.calibrationStartTime=0,this.calibrationCooldown=Date.now()+800,this.ct()}Y(){this.collections=[];const t=new Map;((t,i=document)=>Array.from(i.querySelectorAll(t)))("img").forEach(i=>{const s=i.closest("article, .gallery");if(!s)return;t.has(s)||t.set(s,[]);const e=i.dataset.src||i.getAttribute("src")||i.currentSrc||null;if(!e)return;const h=i.closest("figure"),n=h?h.querySelector("figcaption"):null,o=n?n.textContent.trim():(i.getAttribute("data-caption")||i.getAttribute("alt")||"").trim();t.get(s).push({src:e,el:i,caption:o})}),t.forEach((t,i)=>{if(!t.length)return;const s=this.collections.length;this.collections.push({id:"spot-"+this.dt(),container:i,items:t}),t.forEach((t,i)=>{t.el.dataset.spotlightCollection=s+"",t.el.dataset.spotlightIndex=i+"",t.el.style.cursor="zoom-in"})})}dt(){return Math.random().toString(36).slice(2,9)}G(){const i=e("div",{id:"q",class:"j","aria-hidden":"true",tabindex:"-1"}),s=e("div",{id:"G"}),h=e("div",{id:"w",role:"dialog","aria-modal":"true"}),n=e("div",{id:"x",class:"x"}),o=e("button",{id:"z",class:"C","aria-label":"Previous image","data-dir":"-1"});o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="m13 20-3-8 3-8"/></svg>';const a=e("div",{id:"u",class:"u"}),r=e("div",{id:"m",class:"m"}),l=e("img",{id:"D",draggable:"false"});r.appendChild(l),a.appendChild(r);const c=e("button",{id:"A",class:"C","aria-label":"Next image","data-dir":"1"});c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-right" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="m11 4 3 8-3 8"/></svg>',n.appendChild(o),n.appendChild(a),n.appendChild(c);const d=e("div",{id:"H",class:"H n"}),u=e("div",{id:"v",class:"v"}),p=e("div",{id:"r",class:"r"}),m=e("div",{class:"o"}),g=e("button",{id:"p",class:"E","aria-label":"Zoom out"});g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-zoom-out" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0m4 0h6m8 11-6-6"/></svg>';const w=e("button",{id:"h",class:"E","aria-label":"Reset zoom"},["100%"]),f=e("button",{id:"s",class:"E","aria-label":"Zoom in"});f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-zoom-in" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0m4 0h6m-3-3v6m11 8-6-6"/></svg>';const b=e("button",{id:"k",class:"E","aria-label":"Toggle fullscreen"}),v=e("button",{id:"y",class:"E","aria-label":"Close"});v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-x" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M18 6 6 18M6 6l12 12"/></svg>',m.appendChild(g),m.appendChild(w),m.appendChild(f),m.appendChild(b),m.appendChild(v),u.appendChild(p),u.appendChild(m);const x=e("div",{id:"t",class:"t"});d.appendChild(u),d.appendChild(x),h.appendChild(n),h.appendChild(d),i.appendChild(s),i.appendChild(h),document.body.appendChild(i),this.overlay=i,this.nodes={overlay:i,bg:s,shell:h,ui:d,closeBtn:v,zoomIn:f,zoomOut:g,zoomDisplay:w,fullscreenBtn:b,prevBtn:o,nextBtn:c,canvas:a,transform:r,imgNode:l,counter:p,caption:x},this.ut=0,this.gt=0;const y=Array.from(i.querySelectorAll(".E")),k=[this.nodes.prevBtn,this.nodes.nextBtn,this.nodes.caption,u,...y].filter(Boolean),M=()=>{this.gt=(this.gt||0)+1,this.ut=1,this.wt()},_=()=>{this.gt=Math.max(0,(this.gt||0)-1),0===this.gt&&(this.ut=0,this.ft())};k.forEach(t=>{t.addEventListener("pointerenter",M),t.addEventListener("pointerleave",_)}),this.nodes.closeBtn.addEventListener("click",()=>this.close()),this.nodes.bg.addEventListener("click",()=>this.close()),this.nodes.prevBtn.addEventListener("click",()=>this.prev()),this.nodes.nextBtn.addEventListener("click",()=>this.next()),this.nodes.zoomIn.addEventListener("click",()=>this.bt(t)),this.nodes.zoomOut.addEventListener("click",()=>this.bt(1/t)),this.nodes.zoomDisplay.addEventListener("click",()=>this.vt()),this.nodes.fullscreenBtn.addEventListener("click",()=>this.xt()),i.addEventListener("pointermove",()=>this.yt()),i.addEventListener("pointerdown",()=>this.yt()),i.addEventListener("touchstart",()=>this.yt(),{passive:1}),this.kt(),i.addEventListener("wheel",t=>{this.state.open&&this.Mt(t)&&t.preventDefault()},{passive:0})}Mt(t){const i=this.nodes.canvas.getBoundingClientRect();return t.clientX>=i.left&&t.clientX<=i.right&&t.clientY>=i.top&&t.clientY<=i.bottom}P(){window.addEventListener("keydown",t=>this._t(t)),this.nodes.canvas.addEventListener("wheel",t=>this.Ct(t),{passive:0}),this.nodes.overlay.addEventListener("wheel",t=>{this.calibrationActive&&this.ht(t)},{passive:0}),this.nodes.imgNode.addEventListener("pointerdown",t=>{if(this.state.open&&(this.yt(),t.isPrimary)){this.S=t.pointerId,this.B.x=t.clientX,this.B.y=t.clientY,this.zt={x:t.clientX,y:t.clientY},this.Ht=0;try{this.nodes.imgNode.setPointerCapture(t.pointerId)}catch(i){this.I("setPointerCapture",i)}}}),window.addEventListener("pointermove",t=>this.Tt(t)),window.addEventListener("pointerup",t=>{if(this.S===t.pointerId){this.Ht&&(t.clientY-this.zt.y>100?this.close():(this.state.translateY=0,this.Et(),this.St()),this.Ht=0);try{this.nodes.imgNode.releasePointerCapture(t.pointerId)}catch(i){this.I("releasePointerCapture",i)}this.S=null}}),this.touchStart=null,this.nodes.canvas.addEventListener("touchstart",t=>{this.state.open&&(this.yt(),1===t.touches.length?this.touchStart={x:t.touches[0].clientX,y:t.touches[0].clientY,t:Date.now()}:this.touchStart=null)},{passive:1}),this.nodes.canvas.addEventListener("touchend",t=>this.Bt(t),{passive:1}),this.qt(),new ResizeObserver(()=>{this.state.open&&(this.At(),this.jt({immediate:1}))}).observe(this.nodes.canvas),document.addEventListener("fullscreenchange",()=>this.Dt());let t=1;this.nodes.canvas.addEventListener("gesturestart",i=>{this.state.open&&(i.preventDefault(),this.pointers.size>0||(t=1,this.q=1))},{passive:0}),this.nodes.canvas.addEventListener("gesturechange",i=>{if(!this.state.open)return;if(i.preventDefault(),this.pointers.size>0)return;const s=i.scale/t;if(t=i.scale,1!==s){const t=1+1*(s-1);this.Ft(t,i.clientX,i.clientY)}},{passive:0}),this.nodes.canvas.addEventListener("gestureend",()=>{this.pointers.size>0||(this.q=0)},{passive:0})}Ct(t){if(!this.state.open)return;const i="trackpad"===this.L(t);if(this.calibrationActive)i&&this.ht(t);else if(!(this.calibrationCooldown&&Date.now()<this.calibrationCooldown))return i?i&&this.needsCalibration&&!this.calibrationActive?(t.preventDefault(),void this.U("trackpad")):void this.It(t):(t.preventDefault(),this.yt(),void(t.ctrlKey?this.Wt(t,0):this.$t(t.deltaY)))}It(t){const i=Date.now(),s=i-(this.v||0),e=i-(this.k||0);if(this.C){const i=Math.abs(t.deltaX)>(this.M||0)+5;s>=500&&(e>150||i)&&(this.C=0,this.m=null,this.u=0)}this.k=i,this.M=Math.abs(t.deltaX),this.yt();const h=this.Nt(t);t.preventDefault(),"swipe"===h?this.Ot(t.deltaX):this.Wt(t,1),this.Xt()}Rt(){this.v=Date.now(),this.u=0,this.m="zoom",this.C=1}Ot(t){if(Date.now()-(this.v||0)<500)return;let i=t;this.invertedScroll&&(i=-i),this.u+=i,this.u>20?(this.Rt(),this.next()):this.u<-20&&(this.Rt(),this.prev())}$t(t){const i=Date.now();i-(this._||0)<300||Math.abs(t)<2||(this._=i,t>0?this.next():this.prev())}Nt(t){if(this.m)return this.m;if(t.ctrlKey)return this.m="zoom",this.m;const i=Math.abs(t.deltaX),s=Math.abs(t.deltaY);if(i<1&&s<1)return"zoom";if(i>.65*s&&i-s>1||s<10&&i>10)this.m="swipe";else{if(!(s>i))return"zoom";this.m="zoom"}return this.m}Wt(t,i){if(this.q)return;if(t.ctrlKey){const i=1+.01*-t.deltaY;return void this.Ft(i,t.clientX,t.clientY)}let s=t.deltaY;i&&this.invertedScroll&&(s=-s),i&&Math.abs(s)>Math.abs(t.deltaX)&&Math.abs(s)>0&&(this.Ht=1,this.Yt=1,this.H=1,this.state.translateY+=s,this.state.translateY<0&&(this.state.translateY=0),this.St())}Xt(){clearTimeout(this.p),this.p=setTimeout(()=>this.Gt(),80)}Gt(){this.p&&(clearTimeout(this.p),this.p=null),this.Ht&&(this.state.translateY>100?this.close():(this.state.translateY=0,this.Et(),this.St()),this.Ht=0,this.H=0),this.u=0,this.C||(this.m=null)}yt(){this.state.open&&(this.wt(),this.ft())}ft(){clearTimeout(this.o),this.o=setTimeout(()=>{this.ut?this.ft():this.Pt()},this.l)}wt(){this.nodes?.ui&&(this.nodes.ui.classList.add("l"),this.nodes.ui.classList.remove("n"),this.overlay&&this.overlay.classList.remove("j"))}Pt(){this.nodes?.ui&&(this.nodes.ui.classList.add("n"),this.nodes.ui.classList.remove("l"),this.overlay&&this.overlay.classList.add("j"))}xt(){this.yt(),this.state.fullscreen?this.Kt():this.Lt()}Lt(){const t=this.overlay;if(t&&document.fullscreenElement!==t){if(t.requestFullscreen){const i=t.requestFullscreen();i&&"function"==typeof i.catch&&i.catch(()=>{})}this.Dt()}}Kt(){if(document.fullscreenElement&&document.exitFullscreen){const t=document.exitFullscreen();t&&"function"==typeof t.catch&&t.catch(()=>{})}this.Dt()}Dt(){const t=document.fullscreenElement===this.overlay;this.state.fullscreen=!!t,this.kt()}kt(){const t=this.nodes?.fullscreenBtn;t&&(t.innerHTML=this.state.fullscreen?'\n  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-minimize" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M5 9h4V5M3 3l6 6m-4 6h4v4m-6 2 6-6m10-6h-4V5m0 4 6-6m-2 12h-4v4m0-4 6 6"/></svg>\n  ':'\n  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-maximize" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M16 4h4v4m-6 2 6-6M8 20H4v-4m0 4 6-6m6 6h4v-4m-6-2 6 6M8 4H4v4m0-4 6 6"/></svg>\n  ',t.setAttribute("aria-label",this.state.fullscreen?"Exit fullscreen":"Enter fullscreen"),t.setAttribute("aria-pressed",this.state.fullscreen+""))}Vt(t,i){this.yt(),this.T=t||0,"function"==typeof i&&i()}Zt(t){const i=this.nodes?.imgNode;if(!i)return;const s=t||0;i.style.transition="none",s?(i.style.transform=`translateX(${60*s}px) scale(0.96)`,i.style.opacity="0"):(i.style.transform="translateX(0) scale(1)",i.style.opacity="1"),requestAnimationFrame(()=>{i.style.transition="transform 650ms cubic-bezier(0.3, 1, 0.3, 1), opacity 400ms ease",i.style.transform="translateX(0) scale(1)",i.style.opacity="1";const t=()=>{i.style.transition="",i.style.transform="",i.removeEventListener("transitionend",t)};i.addEventListener("transitionend",t,{once:1})})}qt(){let t=0;const s=i=>{this.pointers.delete(i.pointerId),this.pointers.size<2&&(this.q=0,t=0)};this.nodes.canvas.addEventListener("pointerdown",i=>{if(this.state.open&&(this.yt(),this.Yt=0,this.H=0,this.pointers.set(i.pointerId,i),2===this.pointers.size)){this.q=1;const[i,s]=Array.from(this.pointers.values());t=Math.hypot(s.clientX-i.clientX,s.clientY-i.clientY)}}),window.addEventListener("pointermove",s=>{if(this.pointers.has(s.pointerId)){if(!this.state.open)return this.pointers.clear(),void(this.q=0);if(this.yt(),this.pointers.set(s.pointerId,s),2===this.pointers.size){const[e,h]=Array.from(this.pointers.values()),n=Math.hypot(h.clientX-e.clientX,h.clientY-e.clientY);if(t>0){const o=n/t;if(t=n,1!==o){const t=1+(o-1)*("touch"===s.pointerType?1.1:1),n=(e.clientX+h.clientX)*i,a=(e.clientY+h.clientY)*i;this.Ft(t,n,a)}}}}}),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s)}openCollection(t,i=0){this.collections[t]&&(this.state.open=1,this.state.collectionIndex=t,this.state.itemIndex=i,this.Ut(),this.Z(),this.Jt())}Ut(){this.overlay.style.display="block",this.Qt=document.activeElement,requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.overlay.classList.add("B"),this.overlay.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden",this.nodes.shell.focus(),this.ti&&clearTimeout(this.ti),this.ti=setTimeout(()=>{this.wt(),this.ft()},300)})})}close(){this.state.open&&(this.overlay.classList.remove("B"),this.overlay.setAttribute("aria-hidden","true"),document.documentElement.style.overflow="",this.state.open=0,this.state.fullscreen=0,this.Kt(),this.kt(),clearTimeout(this.o),clearTimeout(this.p),this.ti&&clearTimeout(this.ti),this.u=0,this.m=null,this.v=0,this.C=0,this.M=0,this.T=0,this.Pt(),this.W&&(window.removeEventListener("wheel",this.W),this.W=null),this.calibrationActive&&this.nodes.calibration&&(this.lt(),this.calibrationActive=0,this.calibrationSource=null),setTimeout(()=>{this.state.open||(this.overlay.style.display="none"),this.Qt&&this.Qt.focus()},220))}prev(){!this.collections[this.state.collectionIndex]||this.state.itemIndex<=0||(this.state.itemIndex--,this.Vt(-1,()=>this.Jt()))}next(){const t=this.collections[this.state.collectionIndex];!t||this.state.itemIndex>=t.items.length-1||(this.state.itemIndex++,this.Vt(1,()=>this.Jt()))}ii(){const t=this.collections[this.state.collectionIndex];if(!t)return;const i=t.items.length,s=this.state.itemIndex;this.nodes.prevBtn&&(this.nodes.prevBtn.style.display=s>0?"":"none"),this.nodes.nextBtn&&(this.nodes.nextBtn.style.display=s<i-1?"":"none")}Jt(){const t=this.collections[this.state.collectionIndex];if(!t)return;const i=t.items[this.state.itemIndex];if(!i)return;const s=this.T||0;this.T=0,this.si(),this.ii(),this.nodes.imgNode.style.opacity="0",this.nodes.imgNode.src="",this.nodes.counter.textContent=`${this.state.itemIndex+1} / ${t.items.length}`,this.ei(i.caption),this.liveRegion&&(this.liveRegion.textContent=`Image ${this.state.itemIndex+1} of ${t.items.length}${i.caption?": "+i.caption:""}`);const e=this.nodes.imgNode;e.onload=null,e.onerror=null,e.style.opacity="0",e.src="",e.onload=()=>{requestAnimationFrame(()=>{this.At(),this.jt({immediate:1}),this.Zt(s)})},e.onerror=()=>{e.src="",this.ei("Failed to load image"),e.style.opacity="1"},e.src=i.src,/\.svg($|\?)/i.test(i.src)?e.classList.add("F"):e.classList.remove("F"),e.complete&&e.naturalWidth&&e.onload?.()}ei(t){if(!this.nodes||!this.nodes.caption)return;const i=(t||"").trim();i?(this.nodes.caption.textContent=i,this.nodes.caption.classList.remove("f"),this.nodes.caption.style.display=""):(this.nodes.caption.textContent="",this.nodes.caption.classList.add("f"),this.nodes.caption.style.display="none")}si(){this.state.scale=1,this.state.baseScale=1,this.state.translateX=0,this.state.translateY=0,this.renderState.scale=1,this.renderState.translateX=0,this.renderState.translateY=0,this.h=0,this.hi(),this.i&&(cancelAnimationFrame(this.i),this.i=null)}hi(){[this.nodes.bg,this.nodes.ui,this.nodes.prevBtn,this.nodes.nextBtn,this.nodes.imgNode].forEach(t=>{t&&(t.style.opacity="")})}St(){this.i||(this.h=1,this.ni=Date.now(),this.oi())}oi(){if(!this.h||!this.state.open)return void(this.i=null);const t=Date.now(),i=Math.min(t-(this.ni||t),60)/1e3;this.ni=t;const{scale:s,translateX:e,translateY:h}=this.state,n=this.renderState,o=1-Math.exp(-15*i);n.scale+=(s-n.scale)*o,n.translateX+=(e-n.translateX)*o,n.translateY+=(h-n.translateY)*o,this.ai(s,e,h,n),this.nodes.transform&&(this.nodes.transform.style.transition="none",this.nodes.transform.style.transform=`translate(${n.translateX}px, ${n.translateY}px) scale(${n.scale})`,this.ri(n.scale),this.li(n.translateY),this.nodes.imgNode.style.cursor=Math.abs(n.scale-(this.state.baseScale||1))>.02||Math.abs(n.translateX)>1||Math.abs(n.translateY)>1?"grab":"zoom-out"),this.h?this.i=requestAnimationFrame(()=>this.oi()):this.i=null}li(t){const i=Math.abs(this.state.scale-(this.state.baseScale||1))<.1||this.H;if(t>0&&this.state.open&&i&&this.Yt){const i=Math.min(1,Math.abs(t)/150);this.ci(1-i)}else this.hi()}ci(t){const i=t+"";[this.nodes.bg,this.nodes.ui,this.nodes.prevBtn,this.nodes.nextBtn,this.nodes.imgNode].forEach(t=>{t&&(t.style.opacity=i)})}ai(t,i,s,e){Math.abs(t-e.scale)<.001&&Math.abs(i-e.translateX)<.1&&Math.abs(s-e.translateY)<.1&&(e.scale=t,e.translateX=i,e.translateY=s,this.h=0,Math.abs(s)<1&&(this.Yt=0))}At(){const t=this.nodes?.imgNode;if(!t)return;const i=Math.max(window.innerWidth,1),s=Math.max(window.innerHeight,1),e=t.naturalWidth||t.width||t.clientWidth,h=t.naturalHeight||t.height||t.clientHeight;if(!e||!h)return;const n=i/e,o=s/h;let a;a=i>=s?Math.min(n,o,1):Math.min(n,o),a=Math.min(8,Math.max(.05,a)),this.state.baseScale=a,this.state.scale=a,this.state.translateX=0,this.state.translateY=0,this.renderState.scale=a,this.renderState.translateX=0,this.renderState.translateY=0}jt(t={}){const i=t.immediate||!this.state.open;if(!this.nodes||!this.nodes.transform)return;const{scale:s,translateX:e,translateY:h}=this.state,n=this.nodes.transform;n.style.transition=i?"none":"",n.style.transform=`translate(${e}px, ${h}px) scale(${s})`,this.ri(s),this.nodes.imgNode.style.cursor=Math.abs(s-(this.state.baseScale||1))>.02||Math.abs(e)>1||Math.abs(h)>1?"grab":"zoom-out"}ri(t){if(!this.nodes||!this.nodes.zoomDisplay)return;const i=Math.round(100*(t||1));this.nodes.zoomDisplay.textContent=i+"%",this.nodes.zoomDisplay.title=`Reset zoom (${i}%)`}bt(t){this.yt(),this.state.scale=Math.min(8,Math.max(.2,this.state.scale*t)),this.St()}vt(){this.yt(),this.state.scale=this.state.baseScale||1,this.state.translateX=0,this.state.translateY=0,this.St()}Et(){const{naturalWidth:t,naturalHeight:s}=this.nodes.imgNode,{clientWidth:e,clientHeight:h}=this.nodes.canvas,n=t*this.state.scale,o=s*this.state.scale,a=e*i+.45*n,r=h*i+.45*o;this.state.translateX=Math.min(a,Math.max(-a,this.state.translateX)),this.state.translateY=Math.min(r,Math.max(-r,this.state.translateY))}Ft(t,s,e){this.yt(),this.Yt=0,this.H=0;const h=(this.nodes.transform||this.nodes.imgNode).getBoundingClientRect(),n=s-h.left,o=e-h.top,a=n/h.width,r=o/h.height,l=this.state.scale,c=Math.min(8,Math.max(.2,l*t)),{clientWidth:d,clientHeight:u}=this.nodes.canvas,{naturalWidth:p,naturalHeight:m}=this.nodes.imgNode,g=s-d*i-p*c*(a-i),w=e-u*i-m*c*(r-i);this.state.translateX=g,this.state.translateY=w,this.state.scale=c,this.Et(),this.St()}attachImage(t,i,s){t.dataset.spotlightCollection=i+"",t.dataset.spotlightIndex=s+"",t.addEventListener("click",t=>{t.preventDefault(),this.openCollection(i,s)})}R(){if(document.getElementById("spotlight-styles"))return;const t=e("style",{id:"spotlight-styles",type:"text/css"});t.appendChild(document.createTextNode('@keyframes swipeDown{0%{top:40px;opacity:0;transform:translateX(-50%) scale(.8)}10%{opacity:1;transform:translateX(-50%) scale(1)}60%{top:180px;opacity:1;transform:translateX(-50%) scale(1);box-shadow:0 2px 10px rgba(0,122,255,.4)}75%{top:180px;opacity:0;transform:translateX(-50%) scale(1.5);box-shadow:0 0 0 20px transparent}to{top:180px;opacity:0}}:root{--spot-bg:rgba(6,6,8,1);--spot-ui-bg:rgba(20,20,24,0.78);--spot-ui-fg:rgba(255,255,255,0.95);--spot-muted:rgba(255,255,255,0.74);--spot-btn-bg:rgba(255,255,255,0.08);--spot-btn-border:rgba(255,255,255,0.1);--spot-shadow:0 10px 40px rgba(0,0,0,0.45);--spot-anim:300ms cubic-bezier(.22,.9,.35,1);--spot-font:system-ui,-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,\'Helvetica Neue\',Arial,sans-serif}@media (prefers-color-scheme:light){:root{--spot-bg:rgba(250,250,252,1);--spot-ui-bg:rgba(255,255,255,0.8);--spot-ui-fg:rgba(17,17,20,0.92);--spot-muted:rgba(17,17,20,0.7);--spot-btn-bg:rgba(0,0,0,0.05);--spot-btn-border:rgba(0,0,0,0.1);--spot-shadow:0 2px 80px rgba(0,0,0,0.15)}#q .C{background:rgba(255,255,255,.92);border-color:rgba(0,0,0,.06);box-shadow:0 6px 18px rgba(10,10,10,.06)}#q .C:hover{background:rgba(245,245,245,.98)}}#q{display:none;position:fixed;inset:0;z-index:2147483646;font-family:var(--spot-font);-webkit-font-smoothing:antialiased;opacity:0;transition:opacity var(--spot-anim);touch-action:none;direction:ltr}#q,#q *{-webkit-user-select:none;user-select:none}#q.B{opacity:1}#G,.C svg{transition:opacity var(--spot-anim)}#G,#w{position:fixed;inset:0;opacity:0}#G{background:var(--spot-bg)}#w{pointer-events:none;transform:scale(.9);transition:opacity var(--spot-anim),transform var(--spot-anim)}#q.B #w{transform:scale(1)}#q.B #G,#q.B #w,.C:hover svg,.o .E:hover{opacity:1}#u,#x{inset:0;display:flex;align-items:center;justify-content:center}#x{position:fixed;pointer-events:none;z-index:2147483645}#u{position:absolute;overflow:hidden;pointer-events:auto}#m{will-change:transform;touch-action:none;transform-origin:center center;cursor:grab;transition:transform var(--spot-anim)}#m img,#q.B,.C,.t,.v{pointer-events:auto}#m img{display:block;width:auto;height:auto;max-width:none;max-height:none;object-fit:contain;user-select:none;-webkit-user-drag:none;transition:opacity 180ms ease}#m img.F{width:100%;height:auto;max-width:100vw;max-height:100vh}.C,.t,.v{color:var(--spot-ui-fg);box-shadow:var(--spot-shadow);backdrop-filter:blur(0)}#H,.C{display:flex}.C{position:absolute;top:50%;transform:translateY(-50%);width:50px;height:50px;border-radius:50%;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);align-items:center;justify-content:center;font-size:0;cursor:pointer;opacity:1;transition:background var(--spot-anim),transform var(--spot-anim),opacity var(--spot-anim),backdrop-filter var(--spot-anim);z-index:2147483650}#q.B .C{backdrop-filter:blur(6px)}.C svg{width:30px;height:30px;opacity:.5}.C:hover{background:rgba(0,0,0,.45)}.C[data-dir="-1"]{left:22px;--nav-offset:-40px}.C[data-dir="1"]{right:22px;--nav-offset:40px}#H{position:fixed;inset:0;pointer-events:none;flex-direction:column;justify-content:space-between;gap:20px;z-index:2147483647}.t,.v{background:var(--spot-ui-bg);transition:backdrop-filter var(--spot-anim)}#q.B .t,#q.B .v{backdrop-filter:blur(18px)}.v{align-items:center;gap:18px;height:50px}.E,.o,.r,.v{display:flex}.o{margin-left:auto;align-items:center;gap:10px}.o svg{width:21px;height:21px}.o .E{transition:opacity var(--spot-anim),background 150ms ease;will-change:opacity}.E,.r{height:50px;color:var(--spot-ui-fg);justify-content:center;font-weight:600}.o .E,.r{opacity:.5}.r{font-size:15px;letter-spacing:.08em;min-width:10ch;max-width:12ch;padding:15px;box-sizing:border-box;align-items:flex-end;white-space:nowrap;font-variant-numeric:tabular-nums;-webkit-font-feature-settings:"tnum"1;font-feature-settings:"tnum"1}.E{width:50px;border-radius:6px;border:0;background:0 0;align-items:center;font-size:16px;cursor:pointer;transition:background 150ms ease}.E:active{transform:none}#t{padding:14px 18px;font-size:21px;line-height:1.45;color:var(--spot-muted)}#H.n .t,#H.n .v,#q.j .C,#t.f{opacity:0;pointer-events:none}#q.j .C{transform:translateY(-50%) translateX(var(--nav-offset))}#H .t,#H .v{transition:opacity var(--spot-anim),transform var(--spot-anim);will-change:opacity,transform}#H.n .t,#H.n .v{transform:translateY(-18px)}#H.n .t{transform:translateY(18px)}#H.l .t,#H.l .v{opacity:1;transform:translateY(0)}@media (max-width:600px){#H{flex-direction:column-reverse}#k{display:none}.v{gap:10px;height:75px}.o svg{width:25px;height:25px}#t{font-size:16px}.C{display:none}.C[data-dir="-1"]{left:10px;--nav-offset:-20px}.C[data-dir="1"]{right:10px;--nav-offset:20px}}@media (prefers-reduced-motion:reduce){:root{--spot-anim:0s}#m{transition:none}}.i{position:fixed;inset:0;z-index:2147483660;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s ease}.i.visible{opacity:1;pointer-events:auto}.a{background:var(--spot-ui-bg);color:var(--spot-ui-fg);padding:40px;border-radius:12px;text-align:center;max-width:400px;box-shadow:var(--spot-shadow);backdrop-filter:blur(10px)}.i h3{margin:0 0 15px;font-size:20px}.i p{margin:0;opacity:.8}.trackpad-container{transform:scale(.6);margin:0 auto;width:400px}.trackpad{width:400px;height:250px;background:#fff;border-radius:20px;border:2px solid #ccc;position:relative;overflow:hidden;box-shadow:0 10px 15px -3px rgba(0,0,0,.1);margin:0 auto}#d,.finger{position:absolute}.finger{width:32px;height:32px;background:#007aff;box-shadow:0 2px 10px rgba(0,122,255,.4);border-radius:50%}.g{width:100%;height:9px;background:rgba(128,128,128,.2);border-radius:6px;overflow:hidden}.e{width:0%;height:100%;background:#007aff;transition:width .1s linear}#d{top:15px;right:20px;opacity:.25;transition:opacity 150ms ease;z-index:10;cursor:pointer;background:0 0;border:0;padding:0;margin:0;color:var(--spot-ui-fg);font-weight:600;font-size:14px}#d:hover{opacity:1}#d:focus{outline:0}#d:focus-visible{outline:0}#d:active{transform:scale(.98)}.finger.swipe-down{left:50%;transform:translateX(-50%);animation:swipeDown 2s cubic-bezier(.4,0,.2,1) infinite}')),document.head.appendChild(t)}_t(t){if(!this.state.open)return;this.yt();const i=t.code,s=t.key,e=s.toLowerCase();"Escape"!==i&&"Escape"!==s&&"Esc"!==s?this.di(i,e)||this.pi(i,s)||(["Digit0","Numpad0"].includes(i)||["0",")"].includes(s)?this.vt():"KeyF"!==i&&"f"!==e||this.xt()):this.close()}di(t,i){return["ArrowRight","KeyL","Right"].includes(t)||["arrowright","right","l"].includes(i)?(this.next(),1):["ArrowLeft","KeyH","Left"].includes(t)||["arrowleft","left","h"].includes(i)?(this.prev(),1):0}pi(i,s){return["Equal","NumpadAdd"].includes(i)||["+","="].includes(s)?(this.bt(t),1):["Minus","NumpadSubtract"].includes(i)||["-","_"].includes(s)?(this.bt(1/t),1):0}Tt(t){if(this.S!==t.pointerId)return;if(this.yt(),this.q)return void(this.S=null);if(!this.Ht&&this.zt&&this.mi(t),this.Ht){const i=t.clientY-this.B.y;return this.state.translateY+=i,this.B.x=t.clientX,this.B.y=t.clientY,void this.St()}if("touch"===t.pointerType&&Math.abs(this.state.scale-(this.state.baseScale||1))<.1)return;const i=t.clientX-this.B.x,s=t.clientY-this.B.y;this.B.x=t.clientX,this.B.y=t.clientY,this.state.translateX+=i,this.state.translateY+=s,this.Et(),this.St()}mi(t){if("touch"!==t.pointerType)return;const i=t.clientY-this.zt.y,s=t.clientX-this.zt.x;Math.abs(this.state.scale-(this.state.baseScale||1))<.1&&i>0&&Math.abs(i)>Math.abs(s)&&i>20&&(this.Ht=1,this.Yt=1)}Bt(t){if(!this.state.open||!this.touchStart)return;this.yt();const i=t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientX||0,s=t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientY||0,e=i-this.touchStart.x,h=s-this.touchStart.y,n=Date.now()-this.touchStart.t;this.touchStart=null,this.gi(e,h,n)&&(e<0?this.next():this.prev())}gi(t,i,s){const e=Math.abs(t);return e>Math.abs(i)&&e>20&&s<500&&Math.abs(this.state.scale-(this.state.baseScale||1))<.25}}function n(){if(window.__spotlight_instance)return window.__spotlight_instance;const t=new h;return window.__spotlight_instance=t,t}window.addEventListener("click",t=>{const i=t.target.closest("img");if(!i)return;if(!i.closest("article, .gallery"))return;t.preventDefault();const s=n(),e=parseInt(i.dataset.spotlightCollection||"0",10),h=parseInt(i.dataset.spotlightIndex||"0",10);s.openCollection(e,h)}),window.Spotlight={get instance(){return window.__spotlight_instance||null},get debug(){return window.__spotlight_instance&&window.__spotlight_instance.debug||0},set debug(t){const i=!!t;window.__spotlight_debug__=i,window.__spotlight_instance&&(window.__spotlight_instance.debug=i)},open:(t=0,i=0)=>{window.__spotlight_instance||n(),window.__spotlight_instance.openCollection(t,i)},rescan:()=>{const t=window.__spotlight_instance||n();try{t.overlay&&t.overlay.parentNode&&t.overlay.parentNode.removeChild(t.overlay)}catch(i){t&&"function"==typeof t.I&&t.I("rescan.removeOverlay",i)}return delete window.__spotlight_instance,n()},getCapturedErrors:()=>window.__spotlight_instance&&window.__spotlight_instance.N()||[],clearCapturedErrors:()=>{window.__spotlight_instance&&window.__spotlight_instance.O()}}})()}();
