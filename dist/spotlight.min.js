/*!
 * Spotlight JS v1.0.1
 * Copyright (c) 2025 Anastasia Shebalkina
 * Licensed under the MIT License (see LICENSE)
 *
 * Includes Tabler Icons (https://tabler.io/icons), MIT License
 * Copyright (c) 2020-2025 Tabler Icons Authors (see LICENSE.tabler-icons)
 */
(function(){"use strict";(()=>{const S="spotlight-natural-scrolling",T=(h,t=document)=>Array.from(t.querySelectorAll(h)),l=(h,t={},e=[])=>{const s=document.createElement(h);return Object.entries(t).forEach(([i,n])=>{i==="style"?Object.assign(s.style,n):i.startsWith("on")&&typeof n=="function"?s.addEventListener(i.slice(2),n):i==="dataset"?Object.entries(n).forEach(([o,a])=>s.dataset[o]=a):s.setAttribute(i,n)}),e.forEach(i=>typeof i=="string"?s.appendChild(document.createTextNode(i)):s.appendChild(i)),s},L=`
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-maximize" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M16 4h4v4m-6 2 6-6M8 20H4v-4m0 4 6-6m6 6h4v-4m-6-2 6 6M8 4H4v4m0-4 6 6"/></svg>
  `,C=`
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-minimize" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M5 9h4V5M3 3l6 6m-4 6h4v4m-6 2 6-6m10-6h-4V5m0 4 6-6m-2 12h-4v4m0-4 6 6"/></svg>
  `;class x{constructor(){this.collections=[],this.overlay=null,this.state={open:!1,collectionIndex:0,itemIndex:0,scale:1,baseScale:1,translateX:0,translateY:0,fullscreen:!1},this._rafId=null,this._renderActive=!1,this.renderState={scale:1,translateX:0,translateY:0},this._uiHideTimer=null,this._uiHideDelay=1500,this._wheelSwipeAccum=0,this._wheelSwipeTimer=null,this._wheelMode=null,this._lastSwipeNavTime=0,this._lastWheelEventTime=0,this._lastWheelDeltaX=0,this._lastMouseWheelNav=0,this._swipeModeLocked=!1,this._trackpadSwipeToClose=!1,this._pendingSlideDir=0,this.touchStart=null,this._dragPointerId=null,this._dragLast={x:0,y:0},this._isPinching=!1,this.pointers=new Map,this._caughtErrors=[],this.debug=!!(window&&window.__spotlight_debug__),this._lastTouchTime=0,this._wheelSource=null,this._hasTrackpad=document.body?.classList.contains("using-trackpad")||!1;try{const t=window.localStorage.getItem(S);this.invertedScroll=t==="true",this.needsCalibration=t===null}catch(t){this._reportError("localStorage.getItem",t),this.invertedScroll=!1,this.needsCalibration=!0}this.calibrationActive=!1,this.calibrationSource=null,this._pendingCalibrationListener=null,this._init()}_reportError(t,e){try{this._caughtErrors.push({op:t,err:e,time:Date.now()})}catch{}this.debug&&typeof globalThis<"u"&&globalThis.console&&globalThis.console.warn&&globalThis.console.warn(`[Spotlight] ${t}:`,e)}_getCapturedErrors(){return Array.from(this._caughtErrors||[])}_clearCapturedErrors(){this._caughtErrors=[]}_init(){this._detectInputMethod(),this._injectStyles(),this._scanCollections(),this._createOverlay(),this.liveRegion=l("div",{"aria-live":"polite",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0,0,0,0)",whiteSpace:"nowrap",border:"0"}}),this.nodes.shell.appendChild(this.liveRegion),this._bindGlobalListeners()}_detectInputMethod(){window.addEventListener("touchstart",()=>{this._lastTouchTime=window.performance.now(),this._setInputMode("touch")},{passive:!0})}_determineWheelSource(t){if(!t)return this._wheelSource||"mouse";if(window.performance.now()-(this._lastTouchTime||0)<400)return this._wheelSource||"mouse";if(this._wheelSource==="trackpad")return"trackpad";const s=this._isTrackpadWheel(t),i=s?"trackpad":"mouse";return s&&(this._hasTrackpad=!0),i!==this._wheelSource&&this._setInputMode(s?"trackpad":"mouse"),this._wheelSource=i,i}_setInputMode(t){const e=document.body;e&&(e.classList.remove("using-touch","using-mouse","using-trackpad"),t==="touch"?e.classList.add("using-touch"):t==="trackpad"?(e.classList.add("using-trackpad"),this._hasTrackpad=!0):e.classList.add("using-mouse"))}_isTrackpadWheel(t){return!(!t||typeof t.deltaMode=="number"&&t.deltaMode!==0||Math.abs(t.deltaY)===0||!Number.isInteger(t.deltaY))}_checkCalibration(){if(!this.needsCalibration||this.calibrationActive)return;const t=()=>{this._showCalibration("trackpad")};if(this._hasTrackpad||document.body.classList.contains("using-trackpad")){t();return}const e=s=>{this._determineWheelSource(s)==="trackpad"&&(window.removeEventListener("wheel",e),this._pendingCalibrationListener=null,t())};window.addEventListener("wheel",e,{passive:!0}),this._pendingCalibrationListener=e}_showCalibration(t="trackpad"){if(t!=="trackpad"||this.calibrationActive)return;this._pendingCalibrationListener&&(window.removeEventListener("wheel",this._pendingCalibrationListener),this._pendingCalibrationListener=null),this.calibrationSource=t,this.calibrationActive=!0,this.calibrationAccum=0,this.calibrationStep=0,this.calibrationStartTime=Date.now();const e=l("div",{class:"spot-calibration",role:"dialog","aria-labelledby":"spot-calibration-title","aria-describedby":"spot-calibration-text"}),s=l("div",{class:"spot-calibration-content"}),i=l("h3",{id:"spot-calibration-title"},["Trackpad Setup"]),n=l("p",{id:"spot-calibration-text"},["Swipe down repeatedly to calibrate."]),o=l("div",{class:"trackpad-container"});o.innerHTML=`
        <div class="trackpad">
            <div class="finger swipe-down" style="margin-left: -22px;"></div>
            <div class="finger swipe-down" style="margin-left: 22px;"></div>
        </div>
      `;const a=l("div",{class:"spot-progress-bar"}),r=l("div",{class:"spot-progress-value","aria-live":"polite"});a.appendChild(r),s.appendChild(i),s.appendChild(n),s.appendChild(o),s.appendChild(a),e.appendChild(s),this.nodes.shell.appendChild(e),this.nodes.calibration=e,this.nodes.calibrationProgress=r,this.nodes.calibrationText=n,requestAnimationFrame(()=>{e.classList.add("visible")})}_handleCalibrationWheel(t){if(this.calibrationSource!=="trackpad"||!this._isTrackpadWheel(t))return;if(this._isCalibrationStartupDelayActive()){t.preventDefault(),t.stopPropagation();return}if(t.preventDefault(),t.stopPropagation(),Math.abs(t.deltaX)>Math.abs(t.deltaY))return;this.calibrationAccum=(this.calibrationAccum||0)+t.deltaY;const s=Math.min(Math.abs(this.calibrationAccum)/80,1);this._setCalibrationProgress(s)}_isCalibrationStartupDelayActive(){return this.calibrationStartTime&&Date.now()-this.calibrationStartTime<400}_setCalibrationProgress(t){if(this.nodes.calibrationProgress&&(this.nodes.calibrationProgress.style.width=`${t*100}%`),t<1)return;if(this.calibrationStep===0){this.calibrationStep=1,this.calibrationAccum=0,this.calibrationStartTime=Date.now(),this.nodes.calibrationProgress&&(this.nodes.calibrationProgress.style.width="0%"),this.nodes.calibrationText&&(this.nodes.calibrationText.textContent="One more time...");return}const e=this.calibrationAccum<0;this.invertedScroll=e;try{window.localStorage.setItem(S,String(e))}catch(s){this._reportError("localStorage.setItem",s)}this.needsCalibration=!1,this.calibrationCooldown=Date.now()+800,this.nodes.calibration.classList.remove("visible"),setTimeout(()=>{this.nodes.calibration&&(this.nodes.calibration.remove(),this.nodes.calibration=null,this.nodes.calibrationProgress=null,this.nodes.calibrationText=null),this.calibrationActive=!1,this.calibrationSource=null},300)}_scanCollections(){this.collections=[];const t=new Map;T("img").forEach(s=>{const i=s.closest("article, .gallery");if(!i)return;t.has(i)||t.set(i,[]);const n=s.dataset.src||s.getAttribute("src")||s.currentSrc||null;if(!n)return;const o=s.closest("figure"),a=o?o.querySelector("figcaption"):null,r=a?a.textContent.trim():(s.getAttribute("data-caption")||s.getAttribute("alt")||"").trim();t.get(i).push({src:n,el:s,caption:r})}),t.forEach((s,i)=>{if(!s.length)return;const n=this.collections.length;this.collections.push({id:`spot-${this._randId()}`,container:i,items:s}),s.forEach((o,a)=>{o.el.dataset.spotlightCollection=String(n),o.el.dataset.spotlightIndex=String(a),o.el.style.cursor="zoom-in"})})}_randId(){return Math.random().toString(36).slice(2,9)}_createOverlay(){const t=l("div",{id:"spot-overlay","aria-hidden":"true",tabindex:"-1"}),e=l("div",{id:"spot-bg"}),s=l("div",{id:"spot-shell",role:"dialog","aria-modal":"true"}),i=l("div",{id:"spot-stage",class:"spot-stage"}),n=l("button",{id:"spot-prev",class:"spot-nav","aria-label":"Previous image","data-dir":"-1"});n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-left" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="m13 20-3-8 3-8"/></svg>';const o=l("div",{id:"spot-canvas",class:"spot-canvas"}),a=l("div",{id:"spot-transform",class:"spot-transform"}),r=l("img",{id:"spot-img",draggable:"false"});a.appendChild(r),o.appendChild(a);const c=l("button",{id:"spot-next",class:"spot-nav","aria-label":"Next image","data-dir":"1"});c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-right" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="m11 4 3 8-3 8"/></svg>',i.appendChild(n),i.appendChild(o),i.appendChild(c);const d=l("div",{id:"spot-ui",class:"spot-ui spot-ui-visible"}),p=l("div",{id:"spot-topbar",class:"spot-topbar"}),_=l("div",{id:"spot-counter",class:"spot-counter"}),u=l("div",{class:"spot-controls"}),f=l("button",{id:"spot-zoom-out",class:"spot-btn","aria-label":"Zoom out"});f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-zoom-out" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0m4 0h6m8 11-6-6"/></svg>';const w=l("button",{id:"spot-zoom-display",class:"spot-btn","aria-label":"Reset zoom"},["100%"]),m=l("button",{id:"spot-zoom-in",class:"spot-btn","aria-label":"Zoom in"});m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-zoom-in" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0m4 0h6m-3-3v6m11 8-6-6"/></svg>';const E=l("button",{id:"spot-fullscreen",class:"spot-btn","aria-label":"Toggle fullscreen"}),g=l("button",{id:"spot-close",class:"spot-btn","aria-label":"Close"});g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-x" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M18 6 6 18M6 6l12 12"/></svg>',u.appendChild(f),u.appendChild(w),u.appendChild(m),u.appendChild(E),u.appendChild(g),p.appendChild(_),p.appendChild(u);const y=l("div",{id:"spot-caption",class:"spot-caption"});d.appendChild(p),d.appendChild(y),s.appendChild(i),s.appendChild(d),t.appendChild(e),t.appendChild(s),document.body.appendChild(t),this.overlay=t,this.nodes={overlay:t,bg:e,shell:s,ui:d,closeBtn:g,zoomIn:m,zoomOut:f,zoomDisplay:w,fullscreenBtn:E,prevBtn:n,nextBtn:c,canvas:o,transform:a,imgNode:r,counter:_,caption:y},this._pointerOverUi=!1,this._pointerOverUiCount=0;const A=Array.from(t.querySelectorAll(".spot-btn")),I=[this.nodes.prevBtn,this.nodes.nextBtn,this.nodes.caption,p,...A].filter(Boolean),O=()=>{this._pointerOverUiCount=(this._pointerOverUiCount||0)+1,this._pointerOverUi=!0,this._showUiImmediate()},M=()=>{this._pointerOverUiCount=Math.max(0,(this._pointerOverUiCount||0)-1),this._pointerOverUiCount===0&&(this._pointerOverUi=!1,this._scheduleUiHide())};I.forEach(v=>{v.addEventListener("pointerenter",O),v.addEventListener("pointerleave",M)}),this.nodes.closeBtn.addEventListener("click",()=>this.close()),this.nodes.bg.addEventListener("click",()=>this.close()),this.nodes.prevBtn.addEventListener("click",()=>this.prev()),this.nodes.nextBtn.addEventListener("click",()=>this.next()),this.nodes.zoomIn.addEventListener("click",()=>this._zoomBy(1.2)),this.nodes.zoomOut.addEventListener("click",()=>this._zoomBy(1/1.2)),this.nodes.zoomDisplay.addEventListener("click",()=>this._resetZoom()),this.nodes.fullscreenBtn.addEventListener("click",()=>this._toggleFullscreen()),t.addEventListener("pointermove",()=>this._handleUserActivity()),t.addEventListener("pointerdown",()=>this._handleUserActivity()),t.addEventListener("touchstart",()=>this._handleUserActivity(),{passive:!0}),this._updateFullscreenButton(),t.addEventListener("wheel",v=>{this.state.open&&this._isPointerOverStage(v)&&v.preventDefault()},{passive:!1})}_isPointerOverStage(t){const e=this.nodes.canvas.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom}_bindGlobalListeners(){window.addEventListener("keydown",s=>this._handleKeydown(s)),this.nodes.canvas.addEventListener("wheel",s=>this._handleWheelEvent(s),{passive:!1}),this.nodes.overlay.addEventListener("wheel",s=>{this.calibrationActive&&this._handleCalibrationWheel(s)},{passive:!1}),this.nodes.imgNode.addEventListener("pointerdown",s=>{if(this.state.open&&(this._handleUserActivity(),!!s.isPrimary)){this._dragPointerId=s.pointerId,this._dragLast.x=s.clientX,this._dragLast.y=s.clientY,this._dragStart={x:s.clientX,y:s.clientY},this._isVerticalSwipe=!1;try{this.nodes.imgNode.setPointerCapture(s.pointerId)}catch(i){this._reportError("setPointerCapture",i)}}}),window.addEventListener("pointermove",s=>this._handlePointerMove(s)),window.addEventListener("pointerup",s=>{if(this._dragPointerId===s.pointerId){this._isVerticalSwipe&&(s.clientY-this._dragStart.y>100?this.close():(this.state.translateY=0,this._constrainAndSync(),this._startRenderLoop()),this._isVerticalSwipe=!1);try{this.nodes.imgNode.releasePointerCapture(s.pointerId)}catch(i){this._reportError("releasePointerCapture",i)}this._dragPointerId=null}}),this.touchStart=null,this.nodes.canvas.addEventListener("touchstart",s=>{this.state.open&&(this._handleUserActivity(),s.touches.length===1?this.touchStart={x:s.touches[0].clientX,y:s.touches[0].clientY,t:Date.now()}:this.touchStart=null)},{passive:!0}),this.nodes.canvas.addEventListener("touchend",s=>this._handleTouchEnd(s),{passive:!0}),this._bindPinch(),new ResizeObserver(()=>{this.state.open&&(this._fitImageToViewport(),this._applyTransform({immediate:!0}))}).observe(this.nodes.canvas),document.addEventListener("fullscreenchange",()=>this._syncFullscreenState());let e=1;this.nodes.canvas.addEventListener("gesturestart",s=>{this.state.open&&(s.preventDefault(),!(this.pointers.size>0)&&(e=1,this._isPinching=!0))},{passive:!1}),this.nodes.canvas.addEventListener("gesturechange",s=>{if(!this.state.open||(s.preventDefault(),this.pointers.size>0))return;const i=s.scale/e;if(e=s.scale,i!==1){const n=1+(i-1)*1;this._zoomAtPoint(n,s.clientX,s.clientY)}},{passive:!1}),this.nodes.canvas.addEventListener("gestureend",()=>{this.pointers.size>0||(this._isPinching=!1)},{passive:!1})}_handleWheelEvent(t){if(!this.state.open)return;const s=this._determineWheelSource(t)==="trackpad";if(this.calibrationActive){s&&this._handleCalibrationWheel(t);return}if(!(this.calibrationCooldown&&Date.now()<this.calibrationCooldown)){if(!s){t.preventDefault(),this._handleUserActivity(),t.ctrlKey?this._handleWheelZoom(t,!1):this._handleMouseWheelNavigation(t.deltaY);return}if(s&&this.needsCalibration&&!this.calibrationActive){t.preventDefault(),this._showCalibration("trackpad");return}this._handleTrackpadWheel(t)}}_handleTrackpadWheel(t){const e=Date.now(),s=e-(this._lastSwipeNavTime||0),i=e-(this._lastWheelEventTime||0);if(this._swipeModeLocked){const a=Math.abs(t.deltaX)>(this._lastWheelDeltaX||0)+5;s>=500&&(i>150||a)&&(this._swipeModeLocked=!1,this._wheelMode=null,this._wheelSwipeAccum=0)}this._lastWheelEventTime=e,this._lastWheelDeltaX=Math.abs(t.deltaX),this._handleUserActivity();const n=this._detectWheelMode(t);t.preventDefault(),n==="swipe"?this._handleSwipeWheel(t.deltaX):this._handleWheelZoom(t,!0),this._scheduleWheelGestureReset()}_commitSwipeNavigation(t){const e=Date.now();this._lastSwipeNavTime=e,this._wheelSwipeAccum=0,this._wheelMode="zoom",this._swipeModeLocked=!0}_handleSwipeWheel(t){if(Date.now()-(this._lastSwipeNavTime||0)<500)return;let i=t;this.invertedScroll&&(i=-i);const n=20,o=this.state.baseScale||1;Math.abs(this.state.scale-o)>Math.max(.8,o*.5)||(this._wheelSwipeAccum+=i,this._wheelSwipeAccum>n?(this._commitSwipeNavigation(1),this.next()):this._wheelSwipeAccum<-n&&(this._commitSwipeNavigation(-1),this.prev()))}_handleMouseWheelNavigation(t){const e=Date.now();e-(this._lastMouseWheelNav||0)<300||Math.abs(t)<2||(this._lastMouseWheelNav=e,t>0?this.next():this.prev())}_detectWheelMode(t){if(this._wheelMode)return this._wheelMode;if(t.ctrlKey)return this._wheelMode="zoom",this._wheelMode;const e=Math.abs(t.deltaX),s=Math.abs(t.deltaY),i=this.state.baseScale||1,n=Math.abs(this.state.scale-i)<=Math.max(.8,i*.5);if(e<1&&s<1)return"zoom";const o=e>s*.65&&e-s>1||s<10&&e>10;if(n&&o)this._wheelMode="swipe";else if(s>e)this._wheelMode="zoom";else return"zoom";return this._wheelMode}_handleWheelZoom(t,e){if(this._isPinching)return;if(t.ctrlKey){const i=-t.deltaY,o=.01*1,a=1+i*o;this._zoomAtPoint(a,t.clientX,t.clientY);return}let s=t.deltaY;e&&this.invertedScroll&&(s=-s),e&&Math.abs(s)>Math.abs(t.deltaX)&&Math.abs(s)>0&&(this._isVerticalSwipe=!0,this._swipeIntent=!0,this._trackpadSwipeToClose=!0,this.state.translateY+=s,this.state.translateY<0&&(this.state.translateY=0),this._startRenderLoop())}_scheduleWheelGestureReset(){clearTimeout(this._wheelSwipeTimer),this._wheelSwipeTimer=setTimeout(()=>this._endWheelGesture(),80)}_endWheelGesture(){this._wheelSwipeTimer&&(clearTimeout(this._wheelSwipeTimer),this._wheelSwipeTimer=null),this._isVerticalSwipe&&(this.state.translateY>100?this.close():(this.state.translateY=0,this._constrainAndSync(),this._startRenderLoop()),this._isVerticalSwipe=!1,this._trackpadSwipeToClose=!1),this._wheelSwipeAccum=0,this._swipeModeLocked||(this._wheelMode=null)}_handleUserActivity(){this.state.open&&(this._showUiImmediate(),this._scheduleUiHide())}_scheduleUiHide(){clearTimeout(this._uiHideTimer),this._uiHideTimer=setTimeout(()=>{this._pointerOverUi?this._scheduleUiHide():this._hideUi()},this._uiHideDelay)}_showUiImmediate(){this.nodes?.ui&&(this.nodes.ui.classList.add("spot-ui-visible"),this.nodes.ui.classList.remove("spot-ui-hidden"),this.overlay&&this.overlay.classList.remove("spot-nav-hidden"))}_hideUi(){this.nodes?.ui&&(this.nodes.ui.classList.add("spot-ui-hidden"),this.nodes.ui.classList.remove("spot-ui-visible"),this.overlay&&this.overlay.classList.add("spot-nav-hidden"))}_toggleFullscreen(){this._handleUserActivity(),this.state.fullscreen?this._exitFullscreen():this._enterFullscreen()}_enterFullscreen(){const t=this.overlay;if(!(!t||document.fullscreenElement===t)){if(t.requestFullscreen){const e=t.requestFullscreen();e&&typeof e.catch=="function"&&e.catch(()=>{})}this._syncFullscreenState()}}_exitFullscreen(){if(document.fullscreenElement&&document.exitFullscreen){const t=document.exitFullscreen();t&&typeof t.catch=="function"&&t.catch(()=>{})}this._syncFullscreenState()}_syncFullscreenState(){const t=document.fullscreenElement===this.overlay;this.state.fullscreen=!!t,this._updateFullscreenButton()}_updateFullscreenButton(){const t=this.nodes?.fullscreenBtn;t&&(t.innerHTML=this.state.fullscreen?C:L,t.setAttribute("aria-label",this.state.fullscreen?"Exit fullscreen":"Enter fullscreen"),t.setAttribute("aria-pressed",String(this.state.fullscreen)))}_animateSlide(t,e){this._handleUserActivity(),this._pendingSlideDir=t||0,typeof e=="function"&&e()}_playSlideIn(t){const e=this.nodes?.imgNode;if(!e)return;const s=t||0;e.style.transition="none",s?(e.style.transform=`translateX(${s*60}px) scale(0.96)`,e.style.opacity="0"):(e.style.transform="translateX(0) scale(1)",e.style.opacity="1"),requestAnimationFrame(()=>{e.style.transition="transform 650ms cubic-bezier(0.3, 1, 0.3, 1), opacity 400ms ease",e.style.transform="translateX(0) scale(1)",e.style.opacity="1";const i=()=>{e.style.transition="",e.style.transform="",e.removeEventListener("transitionend",i)};e.addEventListener("transitionend",i,{once:!0})})}_bindPinch(){let t=0;const e=n=>{if(this.state.open&&(this._handleUserActivity(),this._swipeIntent=!1,this._trackpadSwipeToClose=!1,this.pointers.set(n.pointerId,n),this.pointers.size===2)){this._isPinching=!0;const[o,a]=Array.from(this.pointers.values());t=Math.hypot(a.clientX-o.clientX,a.clientY-o.clientY)}},s=n=>{if(this.pointers.has(n.pointerId)){if(!this.state.open){this.pointers.clear(),this._isPinching=!1;return}if(this._handleUserActivity(),this.pointers.set(n.pointerId,n),this.pointers.size===2){const[o,a]=Array.from(this.pointers.values()),r=Math.hypot(a.clientX-o.clientX,a.clientY-o.clientY);if(t>0){const c=r/t;if(t=r,c!==1){const d=n.pointerType==="touch"?1.1:1,p=1+(c-1)*d,_=(o.clientX+a.clientX)*.5,u=(o.clientY+a.clientY)*.5;this._zoomAtPoint(p,_,u)}}}}},i=n=>{this.pointers.delete(n.pointerId),this.pointers.size<2&&(this._isPinching=!1,t=0)};this.nodes.canvas.addEventListener("pointerdown",e),window.addEventListener("pointermove",s),window.addEventListener("pointerup",i),window.addEventListener("pointercancel",i)}openCollection(t,e=0){this.collections[t]&&(this.state.open=!0,this.state.collectionIndex=t,this.state.itemIndex=e,this._handleUserActivity(),this._showOverlay(),this._checkCalibration(),this._loadItem())}_showOverlay(){this.overlay.style.display="block",this._lastFocused=document.activeElement,requestAnimationFrame(()=>{this.overlay.classList.add("spot-open"),this.overlay.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden",this._showUiImmediate(),this._scheduleUiHide(),this.nodes.shell.focus()})}close(){this.state.open&&(this.overlay.classList.remove("spot-open"),this.overlay.setAttribute("aria-hidden","true"),document.documentElement.style.overflow="",this.state.open=!1,this.state.fullscreen=!1,this._exitFullscreen(),this._updateFullscreenButton(),clearTimeout(this._uiHideTimer),clearTimeout(this._wheelSwipeTimer),this._wheelSwipeAccum=0,this._wheelMode=null,this._lastSwipeNavTime=0,this._swipeModeLocked=!1,this._lastWheelDeltaX=0,this._pendingSlideDir=0,this._hideUi(),this._pendingCalibrationListener&&(window.removeEventListener("wheel",this._pendingCalibrationListener),this._pendingCalibrationListener=null),this.calibrationActive&&this.nodes.calibration&&(this.nodes.calibration.remove(),this.nodes.calibration=null,this.nodes.calibrationProgress=null,this.nodes.calibrationText=null,this.calibrationActive=!1,this.calibrationSource=null),setTimeout(()=>{this.state.open||(this.overlay.style.display="none"),this._lastFocused&&this._lastFocused.focus()},220))}prev(){const t=this.collections[this.state.collectionIndex];t&&(this.state.itemIndex=(this.state.itemIndex-1+t.items.length)%t.items.length,this._animateSlide(-1,()=>this._loadItem()))}next(){const t=this.collections[this.state.collectionIndex];t&&(this.state.itemIndex=(this.state.itemIndex+1)%t.items.length,this._animateSlide(1,()=>this._loadItem()))}_loadItem(){const t=this.collections[this.state.collectionIndex];if(!t)return;const e=t.items[this.state.itemIndex];if(!e)return;const s=this._pendingSlideDir||0;this._pendingSlideDir=0,this._resetRenderState(),this.nodes.imgNode.style.opacity="0",this.nodes.imgNode.src="",this.nodes.counter.textContent=`${this.state.itemIndex+1} / ${t.items.length}`,this._updateCaption(e.caption),this.liveRegion&&(this.liveRegion.textContent=`Image ${this.state.itemIndex+1} of ${t.items.length}${e.caption?": "+e.caption:""}`);const i=this.nodes.imgNode;i.onload=null,i.onerror=null,i.style.opacity="0",i.src="",i.onload=()=>{requestAnimationFrame(()=>{this._fitImageToViewport(),this._applyTransform({immediate:!0}),this._playSlideIn(s)})},i.onerror=()=>{i.src="",this._updateCaption("Failed to load image"),i.style.opacity="1"},i.src=e.src,/\.svg($|\?)/i.test(e.src)?i.classList.add("spot-svg"):i.classList.remove("spot-svg"),i.complete&&i.naturalWidth&&i.onload?.()}_updateCaption(t){if(!this.nodes||!this.nodes.caption)return;const e=(t||"").trim();e?(this.nodes.caption.textContent=e,this.nodes.caption.classList.remove("spot-caption-empty"),this.nodes.caption.style.display=""):(this.nodes.caption.textContent="",this.nodes.caption.classList.add("spot-caption-empty"),this.nodes.caption.style.display="none")}_resetRenderState(){this.state.scale=1,this.state.baseScale=1,this.state.translateX=0,this.state.translateY=0,this.renderState.scale=1,this.renderState.translateX=0,this.renderState.translateY=0,this._renderActive=!1,this.nodes.bg&&(this.nodes.bg.style.opacity=""),this.nodes.ui&&(this.nodes.ui.style.opacity=""),this.nodes.prevBtn&&(this.nodes.prevBtn.style.opacity=""),this.nodes.nextBtn&&(this.nodes.nextBtn.style.opacity=""),this.nodes.imgNode&&(this.nodes.imgNode.style.opacity=""),this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_startRenderLoop(){this._rafId||(this._renderActive=!0,this._lastRenderTime=Date.now(),this._renderLoop())}_renderLoop(){if(!this._renderActive||!this.state.open){this._rafId=null;return}const t=Date.now(),i=Math.min(t-(this._lastRenderTime||t),60)/1e3;this._lastRenderTime=t;const{scale:n,translateX:o,translateY:a}=this.state,r=this.renderState,c=1-Math.exp(-15*i);if(r.scale+=(n-r.scale)*c,r.translateX+=(o-r.translateX)*c,r.translateY+=(a-r.translateY)*c,this._checkConvergence(n,o,a,r),this.nodes.transform){this.nodes.transform.style.transition="none",this.nodes.transform.style.transform=`translate(${r.translateX}px, ${r.translateY}px) scale(${r.scale})`,this._updateZoomDisplay(r.scale),this._updateSwipeAnimation(r.translateY);const d=this.nodes.imgNode;d.style.cursor=Math.abs(r.scale-(this.state.baseScale||1))>.02||Math.abs(r.translateX)>1||Math.abs(r.translateY)>1?"grab":"zoom-out"}this._renderActive?this._rafId=requestAnimationFrame(()=>this._renderLoop()):this._rafId=null}_updateSwipeAnimation(t){const s=Math.abs(this.state.scale-(this.state.baseScale||1))<.1||this._trackpadSwipeToClose,i=[this.nodes.bg,this.nodes.ui,this.nodes.prevBtn,this.nodes.nextBtn,this.nodes.imgNode];if(t>0&&this.state.open&&s&&this._swipeIntent){const o=1-Math.min(1,Math.abs(t)/150);i.forEach(a=>{a&&(a.style.opacity=String(o))})}else i.forEach(n=>{n&&(n.style.opacity="")})}_checkConvergence(t,e,s,i){Math.abs(t-i.scale)<.001&&Math.abs(e-i.translateX)<.1&&Math.abs(s-i.translateY)<.1&&(i.scale=t,i.translateX=e,i.translateY=s,this._renderActive=!1,Math.abs(s)<1&&(this._swipeIntent=!1))}_fitImageToViewport(){const t=this.nodes?.imgNode;if(!t)return;const e=Math.max(window.innerWidth,1),s=Math.max(window.innerHeight,1),i=t.naturalWidth||t.width||t.clientWidth,n=t.naturalHeight||t.height||t.clientHeight;if(!i||!n)return;const o=e/i,a=s/n,r=e>=s;let c=1;if(r){const d=i<=e,p=n<=s;d||p?c=1:c=a,c=Math.min(c,1)}else c=Math.min(o,a);c=Math.min(8,Math.max(.05,c)),this.state.baseScale=c,this.state.scale=c,this.state.translateX=0,this.state.translateY=0,this.renderState.scale=c,this.renderState.translateX=0,this.renderState.translateY=0}_applyTransform(t={}){const e=t.immediate||!this.state.open;if(!this.nodes||!this.nodes.transform)return;const{scale:s,translateX:i,translateY:n}=this.state,o=this.nodes.transform;e?o.style.transition="none":o.style.transition="",o.style.transform=`translate(${i}px, ${n}px) scale(${s})`,this._updateZoomDisplay(s);const a=this.nodes.imgNode;a.style.cursor=Math.abs(s-(this.state.baseScale||1))>.02||Math.abs(i)>1||Math.abs(n)>1?"grab":"zoom-out"}_updateZoomDisplay(t){if(!this.nodes||!this.nodes.zoomDisplay)return;const e=Math.round((t||1)*100);this.nodes.zoomDisplay.textContent=`${e}%`,this.nodes.zoomDisplay.title=`Reset zoom (${e}%)`}_zoomBy(t){this._handleUserActivity(),this.state.scale=Math.min(8,Math.max(.2,this.state.scale*t)),this._startRenderLoop()}_resetZoom(){this._handleUserActivity(),this.state.scale=this.state.baseScale||1,this.state.translateX=0,this.state.translateY=0,this._startRenderLoop()}_constrainAndSync(){const{naturalWidth:t,naturalHeight:e}=this.nodes.imgNode,{clientWidth:s,clientHeight:i}=this.nodes.canvas,n=t*this.state.scale,o=e*this.state.scale,a=.05,r=s*.5+n*(.5-a),c=i*.5+o*(.5-a);this.state.translateX=Math.min(r,Math.max(-r,this.state.translateX)),this.state.translateY=Math.min(c,Math.max(-c,this.state.translateY))}_zoomAtPoint(t,e,s){this._handleUserActivity(),this._swipeIntent=!1,this._trackpadSwipeToClose=!1;const i=(this.nodes.transform||this.nodes.imgNode).getBoundingClientRect(),n=e-i.left,o=s-i.top,a=n/i.width,r=o/i.height,c=this.state.scale,d=Math.min(8,Math.max(.2,c*t)),{clientWidth:p,clientHeight:_}=this.nodes.canvas,{naturalWidth:u,naturalHeight:f}=this.nodes.imgNode,w=u*d,m=f*d,E=e-p*.5-w*(a-.5),g=s-_*.5-m*(r-.5);this.state.translateX=E,this.state.translateY=g,this.state.scale=d,this._constrainAndSync(),this._startRenderLoop()}attachImage(t,e,s){t.dataset.spotlightCollection=String(e),t.dataset.spotlightIndex=String(s),t.addEventListener("click",i=>{i.preventDefault(),this.openCollection(e,s)})}_injectStyles(){if(document.getElementById("spotlight-styles"))return;const t=`@keyframes swipeDown{0%{top:40px;opacity:0;transform:translateX(-50%) scale(.8)}10%{opacity:1;transform:translateX(-50%) scale(1)}60%{top:180px;opacity:1;transform:translateX(-50%) scale(1);box-shadow:0 2px 10px rgba(0,122,255,.4)}75%{top:180px;opacity:0;transform:translateX(-50%) scale(1.5);box-shadow:0 0 0 20px transparent}to{top:180px;opacity:0}}:root{--spot-bg:rgba(6,6,8,1);--spot-ui-bg:rgba(20,20,24,0.78);--spot-ui-fg:rgba(255,255,255,0.95);--spot-muted:rgba(255,255,255,0.74);--spot-btn-bg:rgba(255,255,255,0.08);--spot-btn-border:rgba(255,255,255,0.1);--spot-shadow:0 10px 40px rgba(0,0,0,0.45);--spot-anim:300ms cubic-bezier(.22,.9,.35,1);--spot-font:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif}@media (prefers-color-scheme:light){:root{--spot-bg:rgba(250,250,252,1);--spot-ui-bg:rgba(255,255,255,0.8);--spot-ui-fg:rgba(17,17,20,0.92);--spot-muted:rgba(17,17,20,0.7);--spot-btn-bg:rgba(0,0,0,0.05);--spot-btn-border:rgba(0,0,0,0.1);--spot-shadow:0 2px 80px rgba(0,0,0,0.15)}#spot-overlay .spot-nav{background:rgba(255,255,255,.92);border-color:rgba(0,0,0,.06);box-shadow:0 6px 18px rgba(10,10,10,.06)}#spot-overlay .spot-nav:hover{background:rgba(245,245,245,.98)}}#spot-overlay{display:none;position:fixed;inset:0;z-index:2147483646;font-family:var(--spot-font);-webkit-font-smoothing:antialiased;opacity:0;transition:opacity var(--spot-anim);touch-action:none}#spot-overlay,#spot-overlay *{-webkit-user-select:none;user-select:none}#spot-overlay.spot-open{pointer-events:auto;opacity:1}#spot-bg,.spot-nav svg{transition:opacity var(--spot-anim)}#spot-bg,#spot-shell{position:fixed;inset:0;opacity:0}#spot-bg{background:var(--spot-bg)}#spot-shell{pointer-events:none;transform:scale(.996);transition:opacity var(--spot-anim),transform var(--spot-anim)}#spot-overlay.spot-open #spot-shell{opacity:1;transform:scale(1)}#spot-overlay.spot-open #spot-bg,.spot-controls .spot-btn:hover,.spot-nav:hover svg{opacity:1}#spot-canvas,#spot-stage{inset:0;display:flex;align-items:center;justify-content:center}#spot-stage{position:fixed;pointer-events:none;z-index:2147483645}#spot-canvas{position:absolute;overflow:hidden;pointer-events:auto}#spot-transform{will-change:transform;touch-action:none;transform-origin:center center;cursor:grab;transition:transform var(--spot-anim)}#spot-transform img{display:block;width:auto;height:auto;max-width:none;max-height:none;object-fit:contain;user-select:none;-webkit-user-drag:none;pointer-events:auto;transition:opacity 180ms ease}#spot-transform img.spot-svg{width:100%;height:auto;max-width:100vw;max-height:100vh}.spot-caption,.spot-nav,.spot-topbar{pointer-events:auto;color:var(--spot-ui-fg);box-shadow:var(--spot-shadow);backdrop-filter:blur(0)}.spot-nav{position:absolute;top:50%;transform:translateY(-50%);width:50px;height:50px;border-radius:50%;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);display:flex;align-items:center;justify-content:center;font-size:0;cursor:pointer;opacity:1;transition:background var(--spot-anim),transform var(--spot-anim),opacity var(--spot-anim),backdrop-filter var(--spot-anim);z-index:2147483650}#spot-overlay.spot-open .spot-nav{backdrop-filter:blur(6px)}.spot-nav svg{width:30px;height:30px;opacity:.5}.spot-nav:hover{background:rgba(0,0,0,.45)}.spot-nav[data-dir="-1"]{left:22px;--nav-offset:-40px}.spot-nav[data-dir="1"]{right:22px;--nav-offset:40px}#spot-ui{position:fixed;inset:0;pointer-events:none;display:flex;flex-direction:column;justify-content:space-between;gap:20px;z-index:2147483647}.spot-caption,.spot-topbar{background:var(--spot-ui-bg);transition:backdrop-filter var(--spot-anim)}#spot-overlay.spot-open .spot-caption,#spot-overlay.spot-open .spot-topbar{backdrop-filter:blur(18px)}.spot-controls,.spot-topbar{display:flex;align-items:center}.spot-topbar{gap:18px;height:50px}.spot-controls{margin-left:auto;gap:10px}.spot-controls svg{width:21px;height:21px}.spot-controls .spot-btn{opacity:.5;transition:opacity var(--spot-anim),background 150ms ease;will-change:opacity}.spot-btn,.spot-counter{height:50px;color:var(--spot-ui-fg);display:flex;justify-content:center;font-weight:600}.spot-counter{font-size:15px;letter-spacing:.08em;opacity:.5;min-width:10ch;max-width:12ch;padding:15px;box-sizing:border-box;align-items:flex-end;white-space:nowrap;font-variant-numeric:tabular-nums;-webkit-font-feature-settings:"tnum"1;font-feature-settings:"tnum"1}.spot-btn{width:50px;border-radius:6px;border:0;background:0 0;align-items:center;font-size:16px;cursor:pointer;transition:background 150ms ease}.spot-btn:active{transform:none}#spot-caption{padding:14px 18px;font-size:21px;line-height:1.45;color:var(--spot-muted)}#spot-caption.spot-caption-empty{opacity:0;pointer-events:none}#spot-overlay.spot-nav-hidden .spot-nav{opacity:0;pointer-events:none;transform:translateY(-50%) translateX(var(--nav-offset))}#spot-ui .spot-caption,#spot-ui .spot-topbar{transition:opacity var(--spot-anim),transform var(--spot-anim);will-change:opacity,transform}#spot-ui.spot-ui-hidden .spot-topbar{opacity:0;transform:translateY(-18px);pointer-events:none}#spot-ui.spot-ui-hidden .spot-caption{opacity:0;transform:translateY(18px);pointer-events:none}#spot-ui.spot-ui-visible .spot-caption,#spot-ui.spot-ui-visible .spot-topbar{opacity:1;transform:translateY(0)}@media (max-width:600px){#spot-ui{flex-direction:column-reverse}#spot-fullscreen{display:none}.spot-topbar{gap:10px;height:75px}.spot-controls svg{width:25px;height:25px}#spot-caption{font-size:16px}.spot-nav{display:none}.spot-nav[data-dir="-1"]{left:10px;--nav-offset:-20px}.spot-nav[data-dir="1"]{right:10px;--nav-offset:20px}}@media (prefers-reduced-motion:reduce){:root{--spot-anim:0s}#spot-transform{transition:none}}.spot-calibration{position:fixed;inset:0;z-index:2147483660;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s ease}.spot-calibration.visible{opacity:1;pointer-events:auto}.spot-calibration-content{background:var(--spot-ui-bg);color:var(--spot-ui-fg);padding:40px;border-radius:12px;text-align:center;max-width:400px;box-shadow:var(--spot-shadow);backdrop-filter:blur(10px)}.spot-calibration h3{margin:0 0 15px;font-size:20px}.spot-calibration p{margin:0 0 30px;opacity:.8;line-height:1.5}.trackpad-container{transform:scale(.6);margin:0 auto;width:400px}.trackpad{width:400px;height:250px;background:#fff;border-radius:20px;border:2px solid #ccc;position:relative;overflow:hidden;box-shadow:0 10px 15px -3px rgba(0,0,0,.1);margin:0 auto}.finger{width:32px;height:32px;background:#007aff;box-shadow:0 2px 10px rgba(0,122,255,.4);border-radius:50%;position:absolute}.spot-progress-bar{width:100%;height:6px;background:rgba(128,128,128,.2);border-radius:3px;margin-top:25px;overflow:hidden}.spot-progress-value{width:0%;height:100%;background:#007aff;transition:width .1s linear}.finger.swipe-down{left:50%;transform:translateX(-50%);animation:swipeDown 2s cubic-bezier(.4,0,.2,1) infinite}`,e=l("style",{id:"spotlight-styles",type:"text/css"});e.appendChild(document.createTextNode(t)),document.head.appendChild(e)}_handleKeydown(t){if(!this.state.open)return;this._handleUserActivity();const e=t.code,s=t.key,i=s.toLowerCase();if(e==="Escape"||s==="Escape"||s==="Esc"){this.close();return}if(!this._handleNavigationKey(e,i)&&!this._handleZoomKey(e,s)){if(["Digit0","Numpad0"].includes(e)||["0",")"].includes(s)){this._resetZoom();return}(e==="KeyF"||i==="f")&&this._toggleFullscreen()}}_handleNavigationKey(t,e){return["ArrowRight","KeyL","Right"].includes(t)||["arrowright","right","l"].includes(e)?(this.next(),!0):["ArrowLeft","KeyH","Left"].includes(t)||["arrowleft","left","h"].includes(e)?(this.prev(),!0):!1}_handleZoomKey(t,e){return["Equal","NumpadAdd"].includes(t)||["+","="].includes(e)?(this._zoomBy(1.2),!0):["Minus","NumpadSubtract"].includes(t)||["-","_"].includes(e)?(this._zoomBy(1/1.2),!0):!1}_handlePointerMove(t){if(this._dragPointerId!==t.pointerId)return;if(this._handleUserActivity(),this._isPinching){this._dragPointerId=null;return}if(!this._isVerticalSwipe&&this._dragStart&&this._checkForVerticalSwipe(t),this._isVerticalSwipe){const i=t.clientY-this._dragLast.y;this.state.translateY+=i,this._dragLast.x=t.clientX,this._dragLast.y=t.clientY,this._startRenderLoop();return}if(t.pointerType==="touch"&&Math.abs(this.state.scale-(this.state.baseScale||1))<.1)return;const e=t.clientX-this._dragLast.x,s=t.clientY-this._dragLast.y;this._dragLast.x=t.clientX,this._dragLast.y=t.clientY,this.state.translateX+=e,this.state.translateY+=s,this._constrainAndSync(),this._startRenderLoop()}_checkForVerticalSwipe(t){if(t.pointerType!=="touch")return;const e=t.clientY-this._dragStart.y,s=t.clientX-this._dragStart.x;Math.abs(this.state.scale-(this.state.baseScale||1))<.1&&e>0&&Math.abs(e)>Math.abs(s)&&e>20&&(this._isVerticalSwipe=!0,this._swipeIntent=!0)}_handleTouchEnd(t){if(!this.state.open||!this.touchStart)return;this._handleUserActivity();const e=t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientX||0,s=t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientY||0,i=e-this.touchStart.x,n=s-this.touchStart.y,o=Date.now()-this.touchStart.t;this.touchStart=null,this._isValidSwipe(i,n,o)&&(i<0?this.next():this.prev())}_isValidSwipe(t,e,s){const i=Math.abs(t),n=Math.abs(e);return i>n&&i>20&&s<500&&Math.abs(this.state.scale-(this.state.baseScale||1))<.25}}function b(){if(window.__spotlight_instance)return window.__spotlight_instance;const h=new x;return window.__spotlight_instance=h,h}window.addEventListener("click",h=>{const t=h.target.closest("img");if(!t||!t.closest("article, .gallery"))return;h.preventDefault();const s=b(),i=parseInt(t.dataset.spotlightCollection||"0",10),n=parseInt(t.dataset.spotlightIndex||"0",10);s.openCollection(i,n)}),window.Spotlight={get instance(){return window.__spotlight_instance||null},get debug(){return window.__spotlight_instance&&window.__spotlight_instance.debug||!1},set debug(h){const t=!!h;window.__spotlight_debug__=t,window.__spotlight_instance&&(window.__spotlight_instance.debug=t)},open:(h=0,t=0)=>{window.__spotlight_instance||b(),window.__spotlight_instance.openCollection(h,t)},rescan:()=>{const h=window.__spotlight_instance||b();try{h.overlay&&h.overlay.parentNode&&h.overlay.parentNode.removeChild(h.overlay)}catch(t){h&&typeof h._reportError=="function"&&h._reportError("rescan.removeOverlay",t)}return delete window.__spotlight_instance,b()},getCapturedErrors:()=>window.__spotlight_instance&&window.__spotlight_instance._getCapturedErrors()||[],clearCapturedErrors:()=>{window.__spotlight_instance&&window.__spotlight_instance._clearCapturedErrors()}}})()})();
